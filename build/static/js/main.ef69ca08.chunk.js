(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){},105:function(e,t,a){},107:function(e,t,a){},109:function(e,t,a){},111:function(e,t,a){},114:function(e,t,a){},116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),o=a.n(c),s=a(26),l=a.n(s),i=a(23),u=a(39),m=a(42),h=a(9),f=a(10),d=a(17),v=a(15),p=a(18),b="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var E={Accept:"application/json",Authorization:k},g=function(e,t){return fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)({},E,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},j=a(125),y=a(127);a(57);var O=function(e){var t=e.children;return r.a.createElement("nav",{className:"navbar"},t)},N=a(120),S=a(11),w=a.n(S);a(59);var x=function(e){var t=e.text,a=e.className,n=e.path,c=e.size;return r.a.createElement(N.a,{to:n},r.a.createElement("div",{className:w()("logo",a)},r.a.createElement("h1",{className:w()({md:!c},c)},t)))};a(63);var R=function(e){var t=e.children;return r.a.createElement("div",{className:"container"},t)};a(65);var C=function(){return r.a.createElement("div",{className:"hero"})},U=a(47),B=a.n(U),D=(a(78),a(80),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).responsive={0:{items:1},670:{items:2},980:{items:3},1324:{items:4}},a.handleOnDragStart=function(e){return e.preventDefault()},a}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.children;return r.a.createElement("div",{className:"shelf"},r.a.createElement("i",{className:"fas fa-angle-left"}),r.a.createElement(B.a,{mouseDragEnabled:!0,items:e(this.handleOnDragStart),responsive:this.responsive}),r.a.createElement("i",{className:"fas fa-angle-right"}))}}]),t}(n.Component)),T=a(49);a(82);var A=function(e){var t=e.className,a=e.children;return r.a.createElement("div",{className:w()("card",t)},a)};a(84);function W(e){var t=e.src;return r.a.createElement("div",{className:"book-card-avatar",style:{backgroundImage:"url(".concat(t,")")}})}W.defaultProps={src:"https://via.placeholder.com/100x170"};var J=W;a(86);function I(e){var t=e.title,a=e.authors,n=e.children;return r.a.createElement("div",{className:"book-card-body"},r.a.createElement("div",{className:"book-title"},t),r.a.createElement("div",{className:"book-authors"},"by ",a.join(", ")),n)}I.defaultProps={title:"Lorem Ipsom Dolour",authors:["Unknown"]};var M=I;a(88);var P=function(e){var t=e.handleUpdate,a=e.currValue;return r.a.createElement("div",{className:"book-shelf-changer-2"},r.a.createElement("select",{value:a,onChange:function(e){return t(e.target.value)}},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))},z=a(1),L=a.n(z),V=a(19),q=a.n(V);a(93);q.a.propTypes={avgRating:L.a.number};var K=function(e){var t=e.avgRating;return t?r.a.createElement("div",{className:"star-rating"},r.a.createElement(q.a,{rating:t,widgetDimensions:"13px",widgetSpacings:"0.1px",widgetRatedColors:"#f8ce0b"},r.a.createElement(q.a.Widget,null),r.a.createElement(q.a.Widget,null),r.a.createElement(q.a.Widget,null),r.a.createElement(q.a.Widget,null),r.a.createElement(q.a.Widget,null)),r.a.createElement("span",{style:{fontWeight:"bold"}}," ","".concat(t))," avg. rating"):null};a(95);var Z=function(e){var t=e.book,a=e.handleUpdate,n=e.className,c=Object(T.a)(e,["book","handleUpdate","className"]);return r.a.createElement("div",Object.assign({className:w()("book-card",n)},c),r.a.createElement(A,null,r.a.createElement(J,{src:t.imageLinks?t.imageLinks.thumbnail:"https://via.placeholder.com/100x170"}),r.a.createElement(M,{title:t.title,authors:t.authors},r.a.createElement(K,{avgRating:t.averageRating}),r.a.createElement(P,{currValue:t.shelf||"none",handleUpdate:function(e){return a(t,e)}}))))},F=(a(97),function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filteredBooks,a=e.title;return r.a.createElement("div",{className:"book-shelf"},r.a.createElement("h2",{className:"book-shelf-title"},a),r.a.createElement(D,null,function(e){return t.map(function(t){return r.a.createElement(se.Consumer,null,function(a){return r.a.createElement(Z,{onDragStart:e,key:t.id,book:t,handleUpdate:a.updateBookStatus})})})}))}}]),t}(n.Component));a(99);var G=function(){return r.a.createElement("div",{className:"open-search"},r.a.createElement(N.a,{to:"/search"},"Add a book"))};a(101);var H=function(e){var t=e.books,a=e.keys;return r.a.createElement("div",{className:"list-books"},r.a.createElement(O,null,r.a.createElement(x,{path:"/",text:"MyReads",size:"md"})),r.a.createElement(R,null,r.a.createElement(C,null)),r.a.createElement("div",{className:"list-books-content"},r.a.createElement(R,null,Object.keys(a).map(function(e){return r.a.createElement(F,{key:e,title:(n=a[e],n.split(/(?<!^)(?=[A-Z])/).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join(" ")),filteredBooks:t.filter(function(t){return t.shelf===a[e]})});var n}))),r.a.createElement(G,null))};a(103);var Q=function(e){var t=e.handleSearch;return r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(N.a,{to:"/",className:"close-search"},"Close"),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",onKeyUp:function(e){return t(e.target.value)}})))};a(105);var X=function(e){var t=e.className,a=e.children;return r.a.createElement("ul",{className:w()("list",t)},a)};a(107);var Y=function(e){var t=e.results;return r.a.createElement("div",{className:"search-books-results"},r.a.createElement(se.Consumer,null,function(e){return r.a.createElement(X,null,t.map(function(t){return r.a.createElement("li",{key:"".concat(t.id),className:"list-item"},r.a.createElement(Z,{book:t,handleUpdate:e.updateBookStatus}))}))}))},$=a(126),_=a(117),ee=a(124),te=a(123),ae=a(121),ne=a(128),re=a(122),ce=function(){function e(){Object(h.a)(this,e),this.searchTerm=new $.a}return Object(f.a)(e,[{key:"search",value:function(e){this.searchTerm.next(e)}},{key:"doSearch",value:function(e){return Object(_.a)(function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(i.a)({},E,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})}(e))}},{key:"getResults",value:function(){var e=this;return this.searchTerm.pipe(Object(te.a)(200),Object(ae.a)(),Object(ne.a)(function(t){return t?e.doSearch(t):Object(ee.a)([])}),Object(re.a)(function(e){return console.error(e),Object(ee.a)([])}))}}]),e}(),oe=(a(109),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).search=function(e){a.searchService.search(e.trim())},a.searchService=new ce,a.state={results:[]},a}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.searchService.getResults().subscribe(function(t){Array.isArray(t)?e.setState(function(){return{results:t}}):e.setState(function(){return{results:[]}})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"search-books"},r.a.createElement(Q,{handleSearch:this.search}),r.a.createElement(Y,{results:this.state.results}))}}]),t}(n.Component)),se=(a(111),r.a.createContext()),le=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={books:[]},a.updateBookStatus=function(){var e=Object(m.a)(l.a.mark(function e(t,n){var r,c,o,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.books,c=0,e.prev=2,e.next=5,g(t,n);case 5:for(s in o=e.sent)c+=o[s].length;c===r.length?a.setState({books:Object(u.a)(r.filter(function(e){return e.id!==t.id})).concat([Object(i.a)({},t,{shelf:n})])}):c<r.length?a.setState({books:Object(u.a)(r.filter(function(e){return e.id!==t.id}))}):a.setState({books:Object(u.a)(r).concat([Object(i.a)({},t,{shelf:n})])}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(window.localStorage.getItem("allBooks"))){e.next=11;break}return e.prev=2,e.next=5,fetch("".concat(b,"/books"),{headers:E}).then(function(e){return e.json()}).then(function(e){return e.books});case 5:t=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",e.t0);case 11:this.setState({books:t});case 12:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){window.localStorage.setItem("allBooks",JSON.stringify(this.state.books))}},{key:"render",value:function(){var e=this;return r.a.createElement(se.Provider,{value:{state:this.state,updateBookStatus:this.updateBookStatus}},r.a.createElement(j.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(y.a,{exact:!0,path:"/",render:function(){return r.a.createElement(H,{books:e.state.books,keys:t.keys})}}),r.a.createElement(y.a,{path:"/search",component:oe}))))}}]),t}(r.a.Component);le.keys={shelf1:"currentlyReading",shelf2:"wantToRead",shelf3:"read"};var ie=le;a(114);o.a.render(r.a.createElement(ie,null),document.getElementById("root"))},50:function(e,t,a){e.exports=a(116)},57:function(e,t,a){},59:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},80:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){}},[[50,2,1]]]);
//# sourceMappingURL=main.ef69ca08.chunk.js.map